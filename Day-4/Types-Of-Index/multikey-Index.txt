3. multikey Index:

A multikey index is used when we index a field that contains an array.
MongoDB automatically converts a normal index into a multikey index when it detects array values.
MongoDB does not create one index for the full document. Instead, it creates separate index entries for each value inside the array.
Because of this, MongoDB can find array values quickly.
Without a multikey index, MongoDB must check every document, which is slow.


> example:
{
  name: "Hiba",
  skills: ["JavaScript", "Node.js", "MongoDB"]
}

db.users.createIndex({ skills: 1 })   //auto multikey
Here, MongoDB creates multiple index entries:
JavaScript
Node.js
MongoDB
All pointing to the same document.

We can query array fields as -> db.users.find({ skills: "MongoDB" })

> Multikey with nested objects:
{
  name: "Hiba",
  projects: [
    { tech: "React", year: 2024 },
    { tech: "Node", year: 2025 }
  ]
}
index: db.users.createIndex({ "projects.tech": 1 })  //this is also a multikey

> Only ONE array field allowed in a compound index
db.users.createIndex({ skills: 1, hobbies: 1 })  //not allowed if both are arrays

> Multikey indexes use more space
Because, One document -> many index entries
So, Faster reads -> Slightly slower writes